# 7일차

### RDS  자동 백업 vs 데이터베이스 스냅샷

**RDS  자동 백업**

- 백업 기간을 설정해 RDS를 S3로 자동 백업
- 보존기간 : 1일 ~ 35일
- Point in time recovery : DB 인스턴스를 백업해둔 특정 시점으로 복구 가능
- 가장 오래된 시점 ~ 5분 전 시점까지 복구 가능

**데이터베이스 스냅샷**

- 사용자가 RDS 인스턴스에 대해 스냅샷을 생성
- 생성된 스냅샷은 S3에 저장된다.
- 스냅샷은 보존기간이 없어 원하는 만큼 보존 가능

### RDS 복구

스냅샷이나 특정 시점으로 복구를 수행하면 기존 RDS에서 복구되는 것이 아니라, 새로운 DB 인스턴스가 생성된다. 

### RDS 읽기 전용 복제본 (Read Replica) vs 다중 AZ

**RDS 읽기 전용 복제본**

- 읽기만 가능한 DB 인스턴스의 복제본을 여러 개 만드는 기능
- 원본 DB의 읽기 트래픽 분산
- RDS 백업이 활성화 된 상태여야 한다.

**다증 AZ**

- DB 인스턴스를 여러 가용영역에 배치하는 것 (복제본을 다른 AZ에 복제)
- 원본 DB에 업데이트가 발생한 것을 다른 가용영역에 존재하는 복제본 DB에 동기식으로 복제
- Standby Replica는 정상적이 상황서는 읽기 트래픽 처리 불가
- 원본 DB의 문제가 발생하면 RDS 에서 자동으로 복제본으로 연결 처리

### RDS Proxy

- 애플리케이션과 DB의 연결을 풀링해서 공유하며 관리
- **DB 장애 조치 시간 감소**
    - 애플리케이션이 RDS Proxy에 연결
    - 원본 DB에 장애 발생
    - 애플리케이션은 Proxy 풀에 존재하는 예비 복제본과 연결을 사용해 DB 연결을 유지할 수 있음
- DB 연결 풀을 설정하면 매번 새로운 DB연결을 여는데 필요한 오버헤드(메모리, CPU) 감소 > 풀에 존재하는 연결을 다시 사용하면 된다.
- 연결 요청이 풀을 초과하는 경우, 연결 거부