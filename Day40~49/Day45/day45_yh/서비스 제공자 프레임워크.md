# 완벽 공략 4. 서비스 제공자 프레임워크
## 확장 가능한 애플리케이션을 만드는 방법

서비스 제공자 프레임워크의

주요 구성 요소 
1. 서비스 제공자 인터페이스(SPI)와 서비스 제공자(서비스 구현체)
2. 서비스 제공자 등록 API (서비스 인터페이스의 구현체를 등록하는 방법)
3. 서비스 접근 API (서비스의 클라이언트가 서비스 인터페이스의 인스턴스를 가져올 때 사용하는 API)

다양한 변형
- 브릿지 패턴
- 의존 객체 주입 프레임워크 (ex. 스프링)
- java.util.ServiceLoader
  - https://docs.oracle.com/javase/tutorial/sound/SPI-intro.html
  - https://docs.oracle.com/javase/tutorial/ext/basics/spi.html

---

### 강의 내용
'서비스 제공자 인터페이스(SPI)'와 '서비스 제공자 프레임워크'라고 불리우는 이런 것들은 **개념적**인 것.

얼마든지 다양한 변형이 가능하다. (ex. 위에서 언급한 브릿지 패턴이라든가 스프링과 같은 의존 객체 주입 프레임워크, ServiceLoader 등)

'개념적'이라는 표현이 중요한 이유는 구현 자체는 다양하게 가능하지만(= 다양한 변형이 가능), **결국 중요한 건 이걸 사용하는 목적**이기 때문!

즉, (이러한 패턴, 프레임워크의) 목적은 **확장 가능한 애플리케이션**을 만드는 것.
- 보통 확장 가능한 애플리케이션이라 함은 애플리케이션은 그대로 있고(= 내부 코드는 그대로 있고), 외적인 것을 바꿨을 때 다르게 동작할 수 있는 애플리케이션
- 아주 쉬운 예로, 기존에 콘솔에 로그를 찍던 애플리케이션이 외부 설정을 바꿔줌으로써 이메일이나 DB 저장이 되게끔 변경이 될 수 있는 앱

#### 실제 코드로 보는 예시★ (스프링이라는 의존 객체 주입 프레임워크를 사용한 예)
1. 서비스 제공자 '인터페이스와 구현체'
- HelloService를 '서비스 제공자 인터페이스'라고 부를 수 있다. 그리고 ChineseHelloService라는 클래스가 그 구현체인 것.
- "말 그대로 어떠한 서비스를 제공하는 인터페이스"인 것 ㅋㅋ
- 지금 같은 경우는 외부 프로젝트에 있는 ChineseHelloService라는 클래스가 HelloService라는 인터페이스를 이용하여 "Ni hao"라는 문구를 콘솔에 출력 중.
- 이렇게 **외부 프로젝트에 있는 놈을 갖다 쓸 수도 있다는 걸** 잘 기억해두기

2. 서비스 제공자 등록 API
- 책에서 말한대로 서비스 등록을 구현하는 API인 것.
- AppConfig 클래스 참조

3. 서비스 접근 API
- App 클래스 참조

6분대 예시 꼭 해볼 것. 
- META-INF...에서 서비스를 '등록'하고
- ServiceLoader라는 API를 이용해서 서비스에 '접근'하는 것까지!

#### 브릿지 패턴
'구체적인 것'과 '추상적인 것'을 나누고, 그 사이에 다리를 놓는 패턴.

자세한 건 '디자인 패턴 강의'를 참조 (이건 강의에서 예시 코드를 따라 쳐봐야 감이 오겠다;;)

여기서 간단히 보면
- 챔피언과 스킨을 나누기 전에는(ex. KDA아리, KDA카이사 ...)

이러한 **브릿지 패턴은 스프링이나 여타 IoC 프레임워크들이 제공하는 PSA(Portable Service Abstraction)까지도 연결**이 된다.

cf. jar파일
자바 파일을 패키징했을 때 확장자 이름. 
java archive의 준말